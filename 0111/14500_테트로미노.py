# 1번 풀이
N, M = map(int, input().split())

paper = [list(map(int, input().split())) for _ in range(N)]

tetrominos = [[(0,0),(0,1),(0,2),(0,3)], 
              [(0,0),(1,0),(2,0),(3,0)],

              [(0,0),(0,1),(1,0),(1,1)],

              [(0,0),(1,0),(2,0),(2,1)],
              [(0,0),(1,0),(2,0),(2,-1)],
              [(0,0),(0,1),(0,2),(1,2)],
              [(0,0),(0,1),(0,2),(-1,2)],
              [(0,0),(-1,0),(-2,0),(-2,1)],
              [(0,0),(-1,0),(-2,0),(-2,-1)],
              [(0,0),(0,-1),(0,-2),(-1,-2)],
              [(0,0),(0,-1),(0,-2),(1,-2)],
              
              [(0,0),(1,0),(1,1),(2,1)],
              [(0,0),(0,1),(1,1),(1,2)],
              [(0,0),(0,1),(-1,1),(-1,2)],
              [(0,0),(-1,0),(-1,1),(-2,1)],

              [(0,0),(0,1),(0,2),(1,1)],
              [(0,0),(1,0),(2,0),(1,1)],
              [(0,0),(0,1),(0,2),(-1,1)],
              [(0,0),(-1,0),(-2,0),(-1,-1)]]

max_s = 0
for r in range(N):
    for c in range(M):
        for tetromino in tetrominos:
            s = 0
            cnt = 0
            for pr, pc in tetromino:
                if 0<=r+pr<N and 0<=c+pc<M:
                    cnt += 1
                    s += paper[r+pr][c+pc] 
            if cnt == 4:
                max_s = max(max_s,s)
  
                
print(max_s)
